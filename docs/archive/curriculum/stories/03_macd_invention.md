# ğŸ“– Story Chapter 3: MACDã®èª•ç”Ÿ - ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ã€Œè¦‹ãˆã‚‹åŒ–ã€ã—ãŸç”·

## Scene 1: 1970å¹´ä»£å¾ŒåŠã€ãƒ‹ãƒ¥ãƒ¼ãƒ¨ãƒ¼ã‚¯

**ãƒŸã‚³**: ã€Œæ¬¡ã¯ã€RSIã‚ˆã‚Šã‚‚å°‘ã—å‰ã®è©±ã ã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œèª°ï¼Ÿã€

**ãƒŸã‚³**: ã€Œã‚¸ã‚§ãƒ©ãƒ«ãƒ‰ãƒ»ã‚¢ãƒšãƒ«ã€‚æŠ•è³‡é¡§å•ä¼šç¤¾ã‚’çµŒå–¶ã—ã¦ãŸç”·ã ã€

---

### ã€å›æƒ³ã‚·ãƒ¼ãƒ³: ã‚¢ãƒšãƒ«ã®å•é¡Œæ„è­˜ã€‘

**å ´æ‰€**: ãƒ‹ãƒ¥ãƒ¼ãƒ¨ãƒ¼ã‚¯ã€æŠ•è³‡é¡§å•ä¼šç¤¾ã®ã‚ªãƒ•ã‚£ã‚¹

**ã‚¢ãƒšãƒ«** (æŠ•è³‡ã‚¢ãƒŠãƒªã‚¹ãƒˆ):
ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰æ¯æ—¥åŒã˜è³ªå•ã‚’å—ã‘ã‚‹...ã€

**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**: ã€Œä»Šã€è²·ã„æ™‚ã§ã™ã‹ï¼Ÿå£²ã‚Šæ™‚ã§ã™ã‹ï¼Ÿã€

**ã‚¢ãƒšãƒ«**: ã€Œãã‚Œã«ç­”ãˆã‚‹ã®ãŒä¿ºã®ä»•äº‹ã ã€

**ã‚¢ãƒšãƒ«**: ã€Œã§ã‚‚...ã©ã†ã‚„ã£ã¦**å®¢è¦³çš„ã«**ç­”ãˆã‚‹ï¼Ÿã€

*æœºã®ä¸Šã«ã¯ç§»å‹•å¹³å‡ç·šã‚’å¼•ã„ãŸãƒãƒ£ãƒ¼ãƒˆ*

**ã‚¢ãƒšãƒ«**: ã€Œç§»å‹•å¹³å‡ç·šã¯ä½¿ã£ã¦ã‚‹ã€‚çŸ­æœŸç·šã¨é•·æœŸç·šã®ã‚¯ãƒ­ã‚¹ã§åˆ¤æ–­ã—ã¦ã‚‹ã€

```markdown
ã€ç§»å‹•å¹³å‡ç·šã®ã‚¯ãƒ­ã‚¹æˆ¦ç•¥ã€‘

ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ï¼ˆè²·ã„ã‚·ã‚°ãƒŠãƒ«ï¼‰:
çŸ­æœŸç§»å‹•å¹³å‡ç·šãŒé•·æœŸç§»å‹•å¹³å‡ç·šã‚’ä¸‹ã‹ã‚‰ä¸Šã«çªãæŠœã‘ã‚‹

ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹ï¼ˆå£²ã‚Šã‚·ã‚°ãƒŠãƒ«ï¼‰:
çŸ­æœŸç§»å‹•å¹³å‡ç·šãŒé•·æœŸç§»å‹•å¹³å‡ç·šã‚’ä¸Šã‹ã‚‰ä¸‹ã«çªãæŠœã‘ã‚‹
```

**ã‚¢ãƒšãƒ«**: ã€Œã§ã‚‚ã€ã“ã‚Œã«ã¯å•é¡ŒãŒã‚ã‚‹...ã€

---

## Scene 2: ç§»å‹•å¹³å‡ç·šã®é™ç•Œ

**ã‚¢ãƒšãƒ«**: ï¼ˆãƒãƒ£ãƒ¼ãƒˆã‚’ç¨ã‚€ï¼‰

```markdown
ã€ç§»å‹•å¹³å‡ç·šã®3ã¤ã®å•é¡Œã€‘

## å•é¡Œ1: ã‚·ã‚°ãƒŠãƒ«ãŒé…ã„
ã‚¯ãƒ­ã‚¹ãŒç™ºç”Ÿã—ãŸæ™‚ã«ã¯ã€ãƒˆãƒ¬ãƒ³ãƒ‰ãŒã‹ãªã‚Šé€²ã‚“ã§ã„ã‚‹
â†’ åˆ©ç›Šã®å¤§éƒ¨åˆ†ã‚’é€ƒã™

## å•é¡Œ2: ãƒ€ãƒã‚·ãŒå¤šã„
æ¨ªã°ã„ç›¸å ´ï¼ˆãƒ¬ãƒ³ã‚¸ç›¸å ´ï¼‰ã§ã¯ã€ä½•åº¦ã‚‚ã‚¯ãƒ­ã‚¹ãŒç™ºç”Ÿ
â†’ ç„¡é§„ãªå£²è²·ã§æ‰‹æ•°æ–™è² ã‘

## å•é¡Œ3: ã€Œå¼·ã•ã€ãŒã‚ã‹ã‚‰ãªã„
ã‚¯ãƒ­ã‚¹ãŒã€Œå¼·æ°—ã€ãªã®ã‹ã€Œå¼±æ°—ã€ãªã®ã‹åˆ¤æ–­ã§ããªã„
â†’ è‡ªä¿¡ã‚’æŒã£ã¦ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«å‹§ã‚ã‚‰ã‚Œãªã„
```

**ã‚¢ãƒšãƒ«**: ã€Œç§»å‹•å¹³å‡ç·šã¯ã€æ–¹å‘ã€ã¯æ•™ãˆã¦ãã‚Œã‚‹ã€

**ã‚¢ãƒšãƒ«**: ã€Œã§ã‚‚ã€ã€å‹¢ã„ã€ã¯æ•™ãˆã¦ãã‚Œãªã„ã€

**ã‚¢ãƒšãƒ«**: ã€Œ...å‹¢ã„ã‚’å¯è¦–åŒ–ã§ããªã„ã‹ï¼Ÿã€

---

## Scene 3: é–ƒã - ã€Œå·®ã€ã«ç€ç›®

**ã‚¢ãƒšãƒ«**: ï¼ˆãƒšãƒ³ã‚’èµ°ã‚‰ã›ã‚‹ï¼‰

```markdown
ã€æ€è€ƒãƒ—ãƒ­ã‚»ã‚¹ã€‘

ç¾çŠ¶:
çŸ­æœŸç§»å‹•å¹³å‡ç·šï¼ˆ12æ—¥ï¼‰
é•·æœŸç§»å‹•å¹³å‡ç·šï¼ˆ26æ—¥ï¼‰

è¦³å¯Ÿ:
- ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰: çŸ­æœŸ > é•·æœŸï¼ˆå·®ãŒæ‹¡å¤§ï¼‰
- ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰: çŸ­æœŸ < é•·æœŸï¼ˆå·®ãŒæ‹¡å¤§ã€ãƒã‚¤ãƒŠã‚¹ï¼‰
- æ¨ªã°ã„: çŸ­æœŸ â‰ˆ é•·æœŸï¼ˆå·®ãŒç¸®å°ï¼‰

ç€æƒ³:
2æœ¬ã®ç·šã‚’è¦‹ã‚‹ã®ã§ã¯ãªã...
ã€Œå·®ã€ãã®ã‚‚ã®ã‚’è¦‹ã‚Œã°ã„ã„ã®ã§ã¯ï¼Ÿ

å®šç¾©:
MACD Line = EMA(12) - EMA(26)
ï¼ˆEMA = æŒ‡æ•°ç§»å‹•å¹³å‡ï¼‰
```

**ã‚¢ãƒšãƒ«**: ã€Œã“ã‚Œã ã¨ã€1æœ¬ã®ç·šã«ãªã‚‹ã€

**ã‚¢ãƒšãƒ«**: ã€Œä¸Šæ˜‡ = ãƒ—ãƒ©ã‚¹ã€ä¸‹é™ = ãƒã‚¤ãƒŠã‚¹ã€

**ã‚¢ãƒšãƒ«**: ã€Œ...ã§ã‚‚ã€ã¾ã è¶³ã‚Šãªã„ã€

**ã‚¢ãƒšãƒ«**: ã€Œã€è²·ã„æ™‚ã€ã€å£²ã‚Šæ™‚ã€ã‚’ã‚‚ã£ã¨æ˜ç¢ºã«ã—ãŸã„ã€

---

## Scene 4: ã‚·ã‚°ãƒŠãƒ«ç·šã®è¿½åŠ 

**ã‚¢ãƒšãƒ«**: ã€ŒMACDè‡ªä½“ã‚‚ä¸Šä¸‹ã™ã‚‹ã€

**ã‚¢ãƒšãƒ«**: ã€Œã˜ã‚ƒã‚...MACDã®ç§»å‹•å¹³å‡ã‚’å–ã£ãŸã‚‰ï¼Ÿã€

```markdown
ã€ç¬¬2ã®ç€æƒ³ã€‘

Signal Line = EMA(MACD, 9)
â†’ MACDã®9æ—¥é–“ç§»å‹•å¹³å‡

åˆ¤æ–­åŸºæº–:
- MACD > Signal: ä¸Šæ˜‡å‹¢ã„å¢—åŠ  â†’ è²·ã„ã‚·ã‚°ãƒŠãƒ«
- MACD < Signal: ä¸‹é™å‹¢ã„å¢—åŠ  â†’ å£²ã‚Šã‚·ã‚°ãƒŠãƒ«
```

**ã‚¢ãƒšãƒ«**: ã€Œ...ã“ã‚Œã ï¼ã€

**ã‚¢ãƒšãƒ«**: ï¼ˆéå»ã®ãƒãƒ£ãƒ¼ãƒˆã§æ¤œè¨¼ï¼‰

**ã‚¢ãƒšãƒ«**: ã€Œã‚¯ãƒ­ã‚¹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒã€ç§»å‹•å¹³å‡ç·šã‚ˆã‚Šæ—©ã„ï¼ã€

**ã‚¢ãƒšãƒ«**: ã€Œã—ã‹ã‚‚ã€ãƒ€ãƒã‚·ãŒå°‘ãªã„ï¼ã€

---

## Scene 5: ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã®ç™ºæ˜ï¼ˆå¾Œæ—¥è«‡ï¼‰

**ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**:
æ•°å¹´å¾Œã€ãƒˆãƒ¼ãƒã‚¹ãƒ»ã‚¢ã‚¹ãƒ—ãƒ¬ã‚¤ã¨ã„ã†ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼ãŒã€MACDã‚’ã•ã‚‰ã«æ”¹è‰¯ã—ãŸã€‚

**ã‚¢ã‚¹ãƒ—ãƒ¬ã‚¤**: ã€ŒMACDã¨Signal Lineã®å·®ã‚’ã€æ£’ã‚°ãƒ©ãƒ•ã«ã—ãŸã‚‰ã©ã†ã ã‚ã†ï¼Ÿã€

```markdown
ã€ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã®è¿½åŠ ã€‘

Histogram = MACD - Signal

è¦–è¦šçš„åŠ¹æœ:
- æ£’ãŒä¼¸ã³ã‚‹: å‹¢ã„ãŒå¼·ã¾ã£ã¦ã„ã‚‹
- æ£’ãŒç¸®ã‚€: å‹¢ã„ãŒå¼±ã¾ã£ã¦ã„ã‚‹
- æ£’ãŒã‚¼ãƒ­ã‚’ã‚¯ãƒ­ã‚¹: ãƒˆãƒ¬ãƒ³ãƒ‰è»¢æ›
```

**ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**:
ã“ã†ã—ã¦ã€ç¾ä»£ã®MACDï¼ˆ3æœ¬ã‚»ãƒƒãƒˆï¼‰ãŒå®Œæˆã—ãŸã€‚

---

## Scene 6: ç¾ä»£ã€ãƒ¦ã‚¦ã‚¿ã¨ãƒŸã‚³

**ãƒ¦ã‚¦ã‚¿**: ã€Œãªã‚‹ã»ã©...ã€

**ãƒŸã‚³**: ã€Œã‚¢ãƒšãƒ«ã¯ã€ã€å‹¢ã„ã€ã‚’å¯è¦–åŒ–ã—ãŸã‹ã£ãŸã€

**ãƒŸã‚³**: ã€Œãã—ã¦ã€ç§»å‹•å¹³å‡ç·šã®ã€å·®ã€ã«ç€ç›®ã—ãŸã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œã‚·ãƒ³ãƒ—ãƒ«ã ã‘ã©ã€å¤©æ‰çš„ã ãªã€

**ãƒŸã‚³**: ã€Œã˜ã‚ƒã‚ã€å®Ÿè£…ã—ã‚ˆã†ã€

---

## Scene 7: MACDã®å®Ÿè£…

```python
def calculate_macd(prices: pd.Series,
                   fast_period: int = 12,
                   slow_period: int = 26,
                   signal_period: int = 9) -> pd.DataFrame:
    """
    MACDï¼ˆMoving Average Convergence Divergenceï¼‰ã‚’è¨ˆç®—

    Args:
        prices: çµ‚å€¤ã®Series
        fast_period: çŸ­æœŸEMAæœŸé–“ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ12ï¼‰
        slow_period: é•·æœŸEMAæœŸé–“ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ26ï¼‰
        signal_period: ã‚·ã‚°ãƒŠãƒ«ç·šæœŸé–“ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ9ï¼‰

    Returns:
        DataFrameï¼ˆmacd, signal, histogramï¼‰
    """
    # EMAè¨ˆç®—
    ema_fast = prices.ewm(span=fast_period, adjust=False).mean()
    ema_slow = prices.ewm(span=slow_period, adjust=False).mean()

    # MACD Line
    macd = ema_fast - ema_slow

    # Signal Line
    signal = macd.ewm(span=signal_period, adjust=False).mean()

    # Histogram
    histogram = macd - signal

    return pd.DataFrame({
        'macd': macd,
        'signal': signal,
        'histogram': histogram
    })
```

**ãƒ¦ã‚¦ã‚¿**: ã€ŒEMAã£ã¦ä½•ï¼Ÿã€

**ãƒŸã‚³**: ã€ŒExponential Moving Averageã€‚æŒ‡æ•°ç§»å‹•å¹³å‡ã ã€

```markdown
ã€EMA vs SMAã€‘

SMAï¼ˆå˜ç´”ç§»å‹•å¹³å‡ï¼‰:
= (ç›´è¿‘Næ—¥ã®åˆè¨ˆ) / N
â†’ å…¨ã¦ã®æ—¥ãŒåŒã˜é‡ã¿

EMAï¼ˆæŒ‡æ•°ç§»å‹•å¹³å‡ï¼‰:
= å‰æ—¥ã®EMA Ã— (1 - Î±) + ä»Šæ—¥ã®ä¾¡æ ¼ Ã— Î±
â†’ æœ€è¿‘ã®ä¾¡æ ¼ã»ã©é‡è¦–

ãƒ¡ãƒªãƒƒãƒˆ:
SMAã‚ˆã‚Šåå¿œãŒæ—©ã„
â†’ ãƒˆãƒ¬ãƒ³ãƒ‰å¤‰åŒ–ã‚’ç´ æ—©ãæ‰ãˆã‚‹
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œã ã‹ã‚‰MACDã¯åå¿œãŒæ—©ã„ã®ã‹ã€

**ãƒŸã‚³**: ã€Œãã®é€šã‚Šã€

---

## Scene 8: SHIBã§ã®æ¤œè¨¼

```python
# SHIBã®ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿
shib_df = timeseries_manager.get_data('SHIB')

# MACDè¨ˆç®—
macd_df = calculate_macd(shib_df['close'])
shib_df = pd.concat([shib_df, macd_df], axis=1)

# ãƒ¦ã‚¦ã‚¿ãŒè²·ã£ãŸæ—¥
buy_date = '2025-10-18 15:30'

print(f"è³¼å…¥æ—¥:")
print(f"  MACD: {shib_df.loc[buy_date, 'macd']:.8f}")
print(f"  Signal: {shib_df.loc[buy_date, 'signal']:.8f}")
print(f"  Histogram: {shib_df.loc[buy_date, 'histogram']:.8f}")
```

**å‡ºåŠ›**:
```
è³¼å…¥æ—¥:
  MACD: 0.00000015
  Signal: 0.00000028
  Histogram: -0.00000013 ï¼ˆãƒã‚¤ãƒŠã‚¹ï¼ï¼‰
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãŒãƒã‚¤ãƒŠã‚¹...ã€

**ãƒŸã‚³**: ã€ŒMACD < Signalã€‚ã¤ã¾ã‚Šã€ä¸‹é™ã®å‹¢ã„ãŒå¼·ã¾ã£ã¦ã‚‹ã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œã ã‹ã‚‰è²·ã£ãŸå¾Œã«ä¸‹ãŒã£ãŸã®ã‹ï¼ã€

**ãƒŸã‚³**: ã€Œæ¬¡ã«ã€DOGEã‚’è¦‹ã¦ã¿ã‚ˆã†ã€

```python
# DOGEã®æ¤œè¨¼
doge_df = timeseries_manager.get_data('DOGE')
macd_df = calculate_macd(doge_df['close'])
doge_df = pd.concat([doge_df, macd_df], axis=1)

buy_date = '2025-10-18 20:00'
print(f"è³¼å…¥æ—¥:")
print(f"  MACD: {doge_df.loc[buy_date, 'macd']:.6f}")
print(f"  Signal: {doge_df.loc[buy_date, 'signal']:.6f}")
print(f"  Histogram: {doge_df.loc[buy_date, 'histogram']:.6f}")
```

**å‡ºåŠ›**:
```
è³¼å…¥æ—¥:
  MACD: 0.002150
  Signal: 0.001890
  Histogram: 0.000260 ï¼ˆãƒ—ãƒ©ã‚¹ï¼ï¼‰
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãŒãƒ—ãƒ©ã‚¹ï¼ã€

**ãƒŸã‚³**: ã€ŒMACD > Signalã€‚ä¸Šæ˜‡ã®å‹¢ã„ãŒå¼·ã¾ã£ã¦ã‚‹ã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œã ã‹ã‚‰å‹ã¦ãŸã®ã‹ï¼ã€

---

## Scene 9: MACDã®4ã¤ã®ä½¿ã„æ–¹

```markdown
ã€MACDã®4ã¤ã®ä½¿ã„æ–¹ã€‘

## 1. ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹/ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹
ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ï¼ˆè²·ã„ã‚·ã‚°ãƒŠãƒ«ï¼‰:
MACD ãŒ Signal ã‚’ä¸‹ã‹ã‚‰ä¸Šã«çªãæŠœã‘ã‚‹
â†’ Histogram ãŒè² â†’æ­£ã«è»¢ã˜ã‚‹

ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹ï¼ˆå£²ã‚Šã‚·ã‚°ãƒŠãƒ«ï¼‰:
MACD ãŒ Signal ã‚’ä¸Šã‹ã‚‰ä¸‹ã«çªãæŠœã‘ã‚‹
â†’ Histogram ãŒæ­£â†’è² ã«è»¢ã˜ã‚‹

## 2. ã‚¼ãƒ­ãƒ©ã‚¤ãƒ³ã‚¯ãƒ­ã‚¹
MACD > 0: ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰å„ªå‹¢
MACD < 0: ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰å„ªå‹¢
ã‚¼ãƒ­ã‚’ã‚¯ãƒ­ã‚¹: ãƒˆãƒ¬ãƒ³ãƒ‰è»¢æ›ã®å¯èƒ½æ€§

## 3. ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹
ä¾¡æ ¼: é«˜å€¤æ›´æ–°
MACD: é«˜å€¤æ›´æ–°ã›ãš â†’ å¼±æ°—ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹

ä¾¡æ ¼: å®‰å€¤æ›´æ–°
MACD: å®‰å€¤æ›´æ–°ã›ãš â†’ å¼·æ°—ãƒ€ã‚¤ãƒãƒ¼ã‚¸ã‚§ãƒ³ã‚¹

## 4. ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ã®æ‹¡å¤§/ç¸®å°
ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ æ‹¡å¤§: å‹¢ã„ãŒå¼·ã¾ã£ã¦ã„ã‚‹
ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ç¸®å°: å‹¢ã„ãŒå¼±ã¾ã£ã¦ã„ã‚‹ï¼ˆåè»¢æ³¨æ„ï¼‰
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œ4ã¤ã‚‚ã‚ã‚‹ã®ã‹ã€

**ãƒŸã‚³**: ã€Œã§ã‚‚ã€æœ€åˆã¯ã€ã‚¯ãƒ­ã‚¹ã€ã ã‘ã§ã„ã„ã€

---

## Scene 10: MACDã®å¼±ç‚¹

**ãƒŸã‚³**: ã€ŒMACDã«ã‚‚å¼±ç‚¹ãŒã‚ã‚‹ã€

```markdown
ã€MACDã®å¼±ç‚¹ã€‘

## å•é¡Œ1: ãƒ¬ãƒ³ã‚¸ç›¸å ´ã§ã®ãƒ€ãƒã‚·
æ¨ªã°ã„ç›¸å ´ã§ã¯ã€ä½•åº¦ã‚‚ã‚¯ãƒ­ã‚¹ãŒç™ºç”Ÿ
â†’ ç„¡é§„ãªå£²è²·

## å•é¡Œ2: é…è¡ŒæŒ‡æ¨™
ç§»å‹•å¹³å‡ãƒ™ãƒ¼ã‚¹ãªã®ã§ã€ã‚„ã¯ã‚Šé…ã‚Œã‚‹
â†’ ãƒˆãƒ¬ãƒ³ãƒ‰ã®åˆå‹•ã¯æ‰ãˆã‚‰ã‚Œãªã„

## å•é¡Œ3: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£è€ƒæ…®ãªã—
ä¾¡æ ¼å¤‰å‹•ã®å¤§ãã•ï¼ˆãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰ã‚’è€ƒæ…®ã—ãªã„
â†’ æ€¥é¨°/æ€¥è½ã«ã¯å¼±ã„

## å•é¡Œ4: çµ¶å¯¾å€¤ã®æ„å‘³
MACDã®å€¤ãã®ã‚‚ã®ã«ã¯æ„å‘³ãŒãªã„
â†’ ç›¸å¯¾çš„ãªå¤‰åŒ–ã ã‘ã‚’è¦‹ã‚‹
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œã˜ã‚ƒã‚ã€ã©ã†ä½¿ã†ã®ï¼Ÿã€

**ãƒŸã‚³**: ã€ŒRSIã¨çµ„ã¿åˆã‚ã›ã‚‹ã€

---

## Scene 11: RSI Ã— MACD ã®çµ„ã¿åˆã‚ã›

**ãƒŸã‚³**: ã€Œ2ã¤ã®æŒ‡æ¨™ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã¨ã€ç²¾åº¦ãŒä¸ŠãŒã‚‹ã€

```markdown
ã€RSI Ã— MACD çµ„ã¿åˆã‚ã›æˆ¦ç•¥ã€‘

## å¼·ã„è²·ã„ã‚·ã‚°ãƒŠãƒ«
âœ… RSI < 30ï¼ˆå£²ã‚‰ã‚Œã™ãï¼‰
âœ… MACD ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ï¼ˆä¸Šæ˜‡å‹¢ã„é–‹å§‹ï¼‰
âœ… Histogram ãŒè² â†’æ­£
â†’ ã€Œåº•æ‰“ã¡åè»¢ã€ã®å¯èƒ½æ€§å¤§

## å¼·ã„å£²ã‚Šã‚·ã‚°ãƒŠãƒ«
âœ… RSI > 70ï¼ˆè²·ã‚ã‚Œã™ãï¼‰
âœ… MACD ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹ï¼ˆä¸‹é™å‹¢ã„é–‹å§‹ï¼‰
âœ… Histogram ãŒæ­£â†’è² 
â†’ ã€Œå¤©äº•æ‰“ã¡åè½ã€ã®å¯èƒ½æ€§å¤§

## å¼±ã„ã‚·ã‚°ãƒŠãƒ«ï¼ˆç„¡è¦–ï¼‰
âŒ RSIã¨MACDãŒçŸ›ç›¾
ä¾‹: RSI < 30 ã ãŒ MACD ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹
â†’ æ§˜å­è¦‹

## ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
âŒ RSI > 70 ã®æ™‚ã¯ã€MACDãŒè²·ã„ã§ã‚‚è²·ã‚ãªã„
âŒ RSI < 30 ã®æ™‚ã¯ã€MACDãŒå£²ã‚Šã§ã‚‚å£²ã‚‰ãªã„
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œ2ã¤ã®æ­¦å™¨ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã®ã‹ã€

**ãƒŸã‚³**: ã€Œãã†ã€‚å˜ä½“ã‚ˆã‚Šã€çµ„ã¿åˆã‚ã›ã®æ–¹ãŒå¼·ã„ã€

---

## Scene 12: å®Ÿè£…ã‚³ãƒ¼ãƒ‰ï¼ˆæ‹¡å¼µç‰ˆï¼‰

```python
# tools/technical_indicators.py ã«è¿½åŠ 

class TechnicalIndicators:
    # ... (RSIå®Ÿè£…ã¯å‰å›) ...

    @staticmethod
    def macd(prices: pd.Series,
             fast: int = 12,
             slow: int = 26,
             signal: int = 9) -> pd.DataFrame:
        """
        MACDï¼ˆMoving Average Convergence Divergenceï¼‰

        ç™ºæ˜è€…: Gerald Appel (1970å¹´ä»£å¾ŒåŠ)
        æ”¹è‰¯è€…: Thomas Aspray (ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ è¿½åŠ )
        ç”¨é€”: ãƒˆãƒ¬ãƒ³ãƒ‰ã®æ–¹å‘ã¨å‹¢ã„ã‚’åˆ¤å®š

        Args:
            prices: çµ‚å€¤
            fast: çŸ­æœŸEMAæœŸé–“ï¼ˆ12ï¼‰
            slow: é•·æœŸEMAæœŸé–“ï¼ˆ26ï¼‰
            signal: ã‚·ã‚°ãƒŠãƒ«ç·šæœŸé–“ï¼ˆ9ï¼‰

        Returns:
            DataFrameï¼ˆmacd, signal, histogramï¼‰
        """
        ema_fast = prices.ewm(span=fast, adjust=False).mean()
        ema_slow = prices.ewm(span=slow, adjust=False).mean()

        macd = ema_fast - ema_slow
        signal_line = macd.ewm(span=signal, adjust=False).mean()
        histogram = macd - signal_line

        return pd.DataFrame({
            'macd': macd,
            'signal': signal_line,
            'histogram': histogram
        })

    @staticmethod
    def interpret_macd(macd: float, signal: float, histogram: float,
                       prev_histogram: float = None) -> dict:
        """
        MACDå€¤ã‚’è§£é‡ˆ

        Args:
            macd: MACDå€¤
            signal: ã‚·ã‚°ãƒŠãƒ«ç·š
            histogram: ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ 
            prev_histogram: å‰æ—¥ã®ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ 

        Returns:
            {
                'trend': 'bullish' | 'bearish' | 'neutral',
                'signal': 'buy' | 'sell' | 'hold',
                'strength': 0.0-1.0,
                'description': 'èª¬æ˜æ–‡'
            }
        """
        # ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹/ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹æ¤œå‡º
        if prev_histogram is not None:
            if prev_histogram < 0 and histogram > 0:
                return {
                    'trend': 'bullish',
                    'signal': 'buy',
                    'strength': 0.8,
                    'description': 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹æ¤œå‡ºã€‚ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰é–‹å§‹ã®å¯èƒ½æ€§ã€‚'
                }
            elif prev_histogram > 0 and histogram < 0:
                return {
                    'trend': 'bearish',
                    'signal': 'sell',
                    'strength': 0.8,
                    'description': 'ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹æ¤œå‡ºã€‚ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰é–‹å§‹ã®å¯èƒ½æ€§ã€‚'
                }

        # é€šå¸¸ã®åˆ¤å®š
        if histogram > 0:
            strength = min(abs(histogram) / abs(macd) if macd != 0 else 0, 1.0)
            return {
                'trend': 'bullish',
                'signal': 'hold' if strength < 0.3 else 'buy',
                'strength': strength,
                'description': f'ä¸Šæ˜‡ã®å‹¢ã„ã‚ã‚Šï¼ˆHistogram={histogram:.6f}ï¼‰ã€‚'
            }
        elif histogram < 0:
            strength = min(abs(histogram) / abs(macd) if macd != 0 else 0, 1.0)
            return {
                'trend': 'bearish',
                'signal': 'hold' if strength < 0.3 else 'sell',
                'strength': strength,
                'description': f'ä¸‹é™ã®å‹¢ã„ã‚ã‚Šï¼ˆHistogram={histogram:.6f}ï¼‰ã€‚'
            }
        else:
            return {
                'trend': 'neutral',
                'signal': 'hold',
                'strength': 0.0,
                'description': 'ãƒˆãƒ¬ãƒ³ãƒ‰ãªã—ã€‚æ§˜å­è¦‹ã€‚'
            }

    @staticmethod
    def combined_signal(rsi: float, macd_result: dict) -> dict:
        """
        RSI Ã— MACD çµ„ã¿åˆã‚ã›ã‚·ã‚°ãƒŠãƒ«

        Args:
            rsi: RSIå€¤
            macd_result: interpret_macd()ã®çµæœ

        Returns:
            çµ±åˆã‚·ã‚°ãƒŠãƒ«
        """
        rsi_status = TechnicalIndicators.interpret_rsi(rsi)

        # å¼·ã„è²·ã„ã‚·ã‚°ãƒŠãƒ«
        if rsi < 30 and macd_result['signal'] == 'buy':
            return {
                'signal': 'strong_buy',
                'confidence': 0.9,
                'description': 'ã€å¼·ã„è²·ã„ã‚·ã‚°ãƒŠãƒ«ã€‘å£²ã‚‰ã‚Œã™ãï¼‹ä¸Šæ˜‡å‹¢ã„é–‹å§‹ã€‚åç™ºã®å¯èƒ½æ€§å¤§ã€‚'
            }

        # å¼·ã„å£²ã‚Šã‚·ã‚°ãƒŠãƒ«
        if rsi > 70 and macd_result['signal'] == 'sell':
            return {
                'signal': 'strong_sell',
                'confidence': 0.9,
                'description': 'ã€å¼·ã„å£²ã‚Šã‚·ã‚°ãƒŠãƒ«ã€‘è²·ã‚ã‚Œã™ãï¼‹ä¸‹é™å‹¢ã„é–‹å§‹ã€‚èª¿æ•´ã®å¯èƒ½æ€§å¤§ã€‚'
            }

        # ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        if rsi > 70 and macd_result['signal'] == 'buy':
            return {
                'signal': 'hold',
                'confidence': 0.3,
                'description': 'ã€æ§˜å­è¦‹ã€‘è²·ã‚ã‚Œã™ãã®ãŸã‚ã€MACDã®è²·ã„ã‚·ã‚°ãƒŠãƒ«ã¯ç„¡è¦–ã€‚'
            }

        if rsi < 30 and macd_result['signal'] == 'sell':
            return {
                'signal': 'hold',
                'confidence': 0.3,
                'description': 'ã€æ§˜å­è¦‹ã€‘å£²ã‚‰ã‚Œã™ãã®ãŸã‚ã€MACDã®å£²ã‚Šã‚·ã‚°ãƒŠãƒ«ã¯ç„¡è¦–ã€‚'
            }

        # é€šå¸¸ã‚·ã‚°ãƒŠãƒ«
        return {
            'signal': macd_result['signal'],
            'confidence': 0.6,
            'description': f"{rsi_status['description']} {macd_result['description']}"
        }
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œã“ã‚Œã§ã€RSIã¨MACDã®çµ„ã¿åˆã‚ã›ãŒã§ããŸï¼ã€

**ãƒŸã‚³**: ã€Œãã†ã€‚2ã¤ã®æ­¦å™¨ãŒæƒã£ãŸã€

---

## Scene 13: ã‚¨ãƒ”ãƒ­ãƒ¼ã‚°

**ãƒ¦ã‚¦ã‚¿**: ã€ŒRSIã¯ã€éç†±ã€ã€MACDã¯ã€å‹¢ã„ã€ã€

**ãƒŸã‚³**: ã€Œã‚ˆãç†è§£ã§ãã¦ã‚‹ãªã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œã§ã‚‚ã€ã¾ã è¶³ã‚Šãªã„æ°—ãŒã™ã‚‹ã€

**ãƒŸã‚³**: ã€Œé‹­ã„ãªã€‚ç¢ºã‹ã«ã€ã¾ã è¶³ã‚Šãªã„ã€

**ãƒŸã‚³**: ã€Œæ¬¡ã¯...ã€ãƒªã‚¹ã‚¯ã€ã‚’æ¸¬ã‚‹æ­¦å™¨ã ã€

---

## ğŸ“ Chapter 3 ã¾ã¨ã‚

### MACDï¼ˆMoving Average Convergence Divergenceï¼‰

```markdown
ã€ç™ºæ˜ã€‘
- ç™ºæ˜è€…: Gerald Appel (1970å¹´ä»£å¾ŒåŠ)
- æ”¹è‰¯è€…: Thomas Aspray (ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ è¿½åŠ )
- å‹•æ©Ÿ: ç§»å‹•å¹³å‡ç·šã®ã‚¯ãƒ­ã‚¹ã‚’æ”¹è‰¯ã—ã€ã€Œå‹¢ã„ã€ã‚’å¯è¦–åŒ–

ã€è¨ˆç®—å¼ã€‘
MACD Line = EMA(12) - EMA(26)
Signal Line = EMA(MACD, 9)
Histogram = MACD - Signal

ã€è§£é‡ˆã€‘
- Histogram > 0: ä¸Šæ˜‡ã®å‹¢ã„
- Histogram < 0: ä¸‹é™ã®å‹¢ã„
- ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹: è²·ã„ã‚·ã‚°ãƒŠãƒ«
- ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹: å£²ã‚Šã‚·ã‚°ãƒŠãƒ«

ã€RSI Ã— MACD çµ„ã¿åˆã‚ã›ã€‘
å¼·ã„è²·ã„: RSI < 30 ï¼‹ MACD ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹
å¼·ã„å£²ã‚Š: RSI > 70 ï¼‹ MACD ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹
```

### å®Ÿè£…å®Œäº†

âœ… `tools/technical_indicators.py` æ‹¡å¼µ
- `macd()`: MACDè¨ˆç®—
- `interpret_macd()`: MACDè§£é‡ˆ
- `combined_signal()`: RSIÃ—MACDçµ±åˆã‚·ã‚°ãƒŠãƒ«

---

## ğŸ› ï¸ å®Ÿè·µã§ä½¿ã†

MACDã‚’å®Ÿéš›ã®å–å¼•ã§æ´»ç”¨ã™ã‚‹æ–¹æ³•ï¼š
- **Week 2: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã®å®Ÿè·µ**ï¼ˆä½œæˆäºˆå®šï¼‰ - MACDã§ãƒˆãƒ¬ãƒ³ãƒ‰æ–¹å‘ã‚’åˆ¤æ–­
  - ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ï¼ˆè²·ã„ã‚·ã‚°ãƒŠãƒ«ï¼‰
  - ãƒ‡ãƒƒãƒ‰ã‚¯ãƒ­ã‚¹ï¼ˆå£²ã‚Šã‚·ã‚°ãƒŠãƒ«ï¼‰
  - Histogramã§ãƒ¢ãƒ¡ãƒ³ã‚¿ãƒ ç¢ºèª

---

**Next Chapter**: [Chapter 4: Bollinger Bandsã®ç™ºæ˜ - ã€Œãƒªã‚¹ã‚¯ã€ã‚’å¯è¦–åŒ–ã—ãŸç”·](./04_bollinger_bands_invention.md)
