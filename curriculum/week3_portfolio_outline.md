# Week 3: 複数銘柄の比較分析 - ポートフォリオ思考を学ぶ

## このWeekの概要

Week 2では「1銘柄の技術分析」を学びました。RSI、MACD、ボリンジャーバンドを使って、個別銘柄の買い時・売り時を判断できるようになりました。しかし、実際の取引では**複数の銘柄から最適な1つを選ぶ**必要があります。

Week 3では、**複数銘柄の比較分析**を学びます。相関分析、ベータ値、リスク分散などの概念を理解し、「どの銘柄が今一番いいか」を客観的に判断できるようになります。また、複数銘柄に分散投資する「ポートフォリオ思考」も学びます。

ユウタは現在95円の資金を持っています。今週は、1銘柄に全額投資するのではなく、**リスクを分散しながら効率的に資金を増やす**方法を体得します。

## 最終ゴール

このWeekが終わった時点でできること：

1. **`correlation_analyzer.py`を使いこなす**
   - 複数銘柄の相関関係を可視化できる
   - どの銘柄がBTCと連動しているか分かる
   - 独立して動く銘柄を見つけられる

2. **相関分析を理解して使える**
   - 相関係数（-1～+1）の意味を理解
   - 高相関銘柄（0.7以上）と低相関銘柄（0.3以下）を区別
   - 分散投資に最適な銘柄の組み合わせを選べる

3. **ベータ値でリスクを測定**
   - β > 1: ハイリスク・ハイリターン
   - β < 1: ローリスク・ローリターン
   - 自分のリスク許容度に合わせた銘柄選択

4. **ポートフォリオ思考**
   - 1銘柄に全額投資しない
   - 相関の低い銘柄を組み合わせる
   - リスク分散で安定したリターン

5. **複数銘柄の比較分析**
   - 5-10銘柄を一度にスキャン
   - 技術指標 + 相関 + ベータで総合判断
   - 最適な銘柄を効率的に見つける

## 使えるようになるツール

### メインツール（新規）
- **`analysis/correlation_analyzer.py <銘柄1> <銘柄2> ...`**
  - 複数銘柄の相関行列を計算
  - ベータ値の算出
  - 分散投資の推奨組み合わせ

### サブツール（復習）
- **`data/timeseries_storage.py --test <銘柄>`**（Week 2）
  - 技術指標の一括計算

- **`crypto_analyst.py <銘柄>`**（Week 1）
  - 材料の一括取得

## 身につく知識・スキル

### 技術的知識

1. **相関係数（Correlation Coefficient）**
   - 2つの銘柄の価格変動の連動性
   - +1: 完全に同じ動き
   - 0: 無関係
   - -1: 完全に逆の動き
   - 目安: 相関 > 0.7は高相関、< 0.3は低相関

2. **ベータ値（β）**
   - 市場全体（BTC）との連動度
   - β = 1: BTCと同じリスク
   - β > 1: BTCより変動が激しい（ハイリスク）
   - β < 1: BTCより変動が穏やか（ローリスク）

3. **分散投資（Diversification）**
   - 複数の銘柄に資金を分ける
   - 相関の低い銘柄を組み合わせる
   - 1つが下がっても、他でカバー

4. **ポートフォリオリスク**
   - 個別銘柄リスクの合計 ≠ ポートフォリオリスク
   - 相関が低いほど、リスクが減る
   - 効率的フロンティア（最適なリスク・リターン比）

5. **シャープレシオ（Sharpe Ratio）**
   - リターン ÷ リスク
   - 数値が高いほど「効率的」
   - ポートフォリオの良し悪しを判断

### メンタル・マインドセット

1. **分散思考**
   - 1銘柄に全額投資しない
   - 「卵を1つのカゴに盛らない」

2. **市場との相対比較**
   - 個別銘柄の絶対評価だけでなく、他との比較

3. **リスクとリターンのバランス**
   - ハイリターンだけを追わない
   - 安定性も重視

## 登場人物の成長

### ユウタの現状（Week 3開始時）

**資金**: 95円（Week 2終了時）

**スキル**:
- ✅ crypto_analyst.pyで材料を集められる
- ✅ timeseries_storage.pyで技術指標を確認できる
- ✅ RSI、MACD、ボリンジャーバンド、ボラティリティを理解
- ✅ 複数の指標を組み合わせて判断できる
- ❌ 複数銘柄の比較方法を知らない
- ❌ 1銘柄ずつしか見ていない
- ❌ 分散投資の概念を知らない

**メンタル**:
- 技術指標の有効性を理解
- データで判断する習慣がついた
- しかし「どの銘柄を選ぶか」に迷いがある

### ユウタの到達点（Week 3終了時）

**資金**: 約115-130円（目標）

**スキル**:
- ✅ correlation_analyzer.pyを使いこなせる
- ✅ 相関分析でリスク分散できる
- ✅ ベータ値でリスクを測定できる
- ✅ 複数銘柄を一度に比較できる
- ✅ ポートフォリオ思考で取引できる

**メンタル**:
- 1銘柄に全額投資する怖さを理解
- 分散投資で安心感を得る
- 市場全体を俯瞰する視点

### ミコが教えること

1. **相関分析の基礎**
   - 相関係数とは何か
   - なぜ分散投資が重要か

2. **ベータ値の活用**
   - 市場との連動度
   - リスク許容度に応じた銘柄選択

3. **ポートフォリオ構築**
   - 資金配分の考え方
   - 相関の低い銘柄の組み合わせ

4. **実践での応用**
   - 5-10銘柄を一度にスキャン
   - 最適な組み合わせを選ぶ

## Week 3のストーリーライン

### Act 1: 選択の迷い（20%）
- ユウタが10銘柄を分析して選べない
- 全部良さそうに見える、どれを選ぶべきか迷う
- ミコが「1つずつ見てたら効率悪い」と指摘

### Act 2: 相関分析との出会い（25%）
- ミコがcorrelation_analyzer.pyを紹介
- 複数銘柄の相関関係を可視化
- 「同じような動きをする銘柄に複数投資しても意味がない」

### Act 3: 分散投資の実践（30%）
- 相関の低い2-3銘柄を選ぶ
- 資金を分散して投資
- 1つが下がっても他でカバーされる体験

### Act 4: ポートフォリオ思考の確立（25%）
- ベータ値でリスクを測定
- シャープレシオで効率を評価
- ユウタが自分のポートフォリオを構築

## 前のWeekからの繋がり

### Week 2で学んだこと（復習）
- 技術指標（RSI, MACD, ボリンジャーバンド）
- ボラティリティでリスク測定
- 複数指標の組み合わせ
- 1銘柄の深い分析

### Week 3での発展
- 1銘柄 → 複数銘柄の比較
- 個別リスク → ポートフォリオリスク
- 絶対評価 → 相対評価
- 集中投資 → 分散投資

## 次のWeekへの伏線

### Week 4で学ぶこと（予告）
- カスタム指標の作成（`analysis/indicators/`プラグインシステム）
- バックテストでストラテジーを検証
- 自動売買の準備

### Week 3からの繋がり
- ポートフォリオ分析（Week 3）→ 自動化とバックテスト（Week 4）
- 手動での分析（Week 3）→ 自動化されたストラテジー（Week 4）

---

## 文字数目安と構成

**目標文字数**: 10,000文字以上

### Part 1: ストーリー導入（1,500文字）
- Scene 1: 選択の迷い
- Scene 2: ミコの提案
- Scene 3: correlation_analyzer.pyとの出会い

### Part 2: 相関分析の説明（2,000文字）
- 2.1 相関係数とは
- 2.2 相関行列の読み方
- 2.3 高相関・低相関の意味
- 2.4 分散投資の原理

### Part 3: ベータ値とリスク測定（1,500文字）
- 3.1 ベータ値とは
- 3.2 市場との連動度
- 3.3 リスク許容度に応じた選択

### Part 4: ツールの使い方（1,500文字）
- 4.1 correlation_analyzer.pyの基本
- 4.2 出力の見方
- 4.3 推奨組み合わせの理解

### Part 5: 実践パート1（1,500文字）
- 5.1 10銘柄のスキャン
- 5.2 相関分析の実行
- 5.3 最適な組み合わせを発見

### Part 6: 実践パート2（1,500文字）
- 6.1 分散投資の実行
- 6.2 ポートフォリオの成果
- 6.3 リバランスの実践

### Part 7: あなたの実践ガイド（2,500文字）
- 7.1 correlation_analyzer.pyの詳細手順
- 7.2 相関分析の実例10個
- 7.3 ポートフォリオ構築のチェックリスト
- 7.4 トラブルシューティング

### Part 8: まとめと振り返り（1,000文字）
- 8.1 学んだことリスト
- 8.2 ユウタの成長
- 8.3 次のWeekへの予告

---

**次のステップ**: ステップ2（詳細な骨子を作成）
