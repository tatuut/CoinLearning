# 04. Bollinger Bands - ãƒªã‚¹ã‚¯ã‚’å¯è¦–åŒ–

## å®Ÿè·µã‚¬ã‚¤ãƒ‰

**Week 2ã§è©³ã—ãå­¦ã³ã¾ã™**

Bollinger Bandsã‚’ä½¿ã£ãŸå–å¼•ã®å®Ÿè·µæ–¹æ³•ï¼š
- ãƒãƒ³ãƒ‰ã®å¹…ã§ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’ç¢ºèª
- ä¾¡æ ¼ãŒãƒãƒ³ãƒ‰ã‚’çªãæŠœã‘ãŸæ™‚ã®åˆ¤æ–­
- ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºã¨ã‚¨ã‚¯ã‚¹ãƒ‘ãƒ³ã‚·ãƒ§ãƒ³ã®æ¤œå‡º
- å…·ä½“çš„ãªä½¿ã„æ–¹ã¯ã€ä»¥ä¸‹ã®æŠ€è¡“è§£èª¬ã‚’èª­ã‚“ã§ã‹ã‚‰ Week 2ã§å®Ÿè·µã—ã¾ã™

---

## æŠ€è¡“è§£èª¬ - Bollinger Bandsã®ç™ºæ˜

# ğŸ“– Story Chapter 4: Bollinger Bandsã®ç™ºæ˜ - ã€Œãƒªã‚¹ã‚¯ã€ã‚’å¯è¦–åŒ–ã—ãŸç”·

## Scene 1: 1980å¹´ä»£åˆé ­ã€ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢

**ãƒŸã‚³**: ã€ŒRSIã¨MACDã§ã€ã€éç†±ã€ã¨ã€å‹¢ã„ã€ã¯ã‚ã‹ã‚‹ã€

**ãƒŸã‚³**: ã€Œã§ã‚‚ã€ã¾ã è¶³ã‚Šãªã„ã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œä½•ãŒï¼Ÿã€

**ãƒŸã‚³**: ã€Œ**ãƒªã‚¹ã‚¯**ã ã€

---

### ã€å›æƒ³ã‚·ãƒ¼ãƒ³: ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ã®ç–‘å•ã€‘

**å ´æ‰€**: ã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢ã€æŠ•è³‡é¡§å•ä¼šç¤¾

**ã‚¸ãƒ§ãƒ³ãƒ»ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼** (è‹¥æ‰‹ã‚¢ãƒŠãƒªã‚¹ãƒˆ):
ã€Œã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰æ¯æ—¥èã‹ã‚Œã‚‹...ã€

**ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**: ã€Œä»Šã€è²·ã£ã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™ã‹ï¼Ÿã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œãã‚Œã«ç­”ãˆã‚‹ã«ã¯...ã€ä»Šã®ä¾¡æ ¼ãŒç•°å¸¸ã‹ã©ã†ã‹ã€ã‚’åˆ¤æ–­ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œã§ã‚‚ã€ä½•ãŒã€æ­£å¸¸ã€ã§ã€ä½•ãŒã€ç•°å¸¸ã€ãªã®ã‹ï¼Ÿã€

*æœºã®ä¸Šã«ã¯æ ªä¾¡ãƒãƒ£ãƒ¼ãƒˆã€‚æ¿€ã—ãä¸Šä¸‹ã™ã‚‹ä¾¡æ ¼*

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œä¾¡æ ¼ã¯å¸¸ã«å‹•ã„ã¦ã„ã‚‹ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œé™ã‹ãªæ™‚ã‚‚ã‚ã‚Œã°ã€è’ã‚Œã‚‹æ™‚ã‚‚ã‚ã‚‹ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œ**ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå¤‰å‹•å¹…ï¼‰ãŒå¤‰ã‚ã‚‹**ã‚“ã ã€

---

## Scene 2: å›ºå®šå¹…ãƒãƒ³ãƒ‰ã®å¤±æ•—

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œæœ€åˆã¯ã€ç§»å‹•å¹³å‡ç·šã®ä¸Šä¸‹ã«å›ºå®šå¹…ã®ãƒãƒ³ãƒ‰ã‚’å¼•ã„ã¦ã¿ãŸã€

```markdown
ã€å›ºå®šå¹…ãƒãƒ³ãƒ‰ï¼ˆå¤±æ•—ä½œï¼‰ã€‘

Upper Band = MA(20) + $5
Middle Band = MA(20)
Lower Band = MA(20) - $5

å•é¡Œ:
- ä¾¡æ ¼ãŒ$100ã®æ™‚: Â±$5ã¯ç‹­ã™ãã‚‹ï¼ˆã™ãçªç ´ï¼‰
- ä¾¡æ ¼ãŒ$10ã®æ™‚: Â±$5ã¯åºƒã™ãã‚‹ï¼ˆå±Šã‹ãªã„ï¼‰

â†’ ä¾¡æ ¼æ°´æº–ã«ã‚ˆã£ã¦ã€é©åˆ‡ãªå¹…ãŒå¤‰ã‚ã‚‹
```

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œãƒ€ãƒ¡ã ...å›ºå®šå¹…ã˜ã‚ƒæ„å‘³ãŒãªã„ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œä¾¡æ ¼ãŒé«˜ã„æ™‚ã¯å¹…ã‚’åºƒãã€ä½ã„æ™‚ã¯å¹…ã‚’ç‹­ã...ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œã§ã‚‚ã€ã©ã†ã‚„ã£ã¦ã€é©åˆ‡ãªå¹…ã€ã‚’æ±ºã‚ã‚‹ï¼Ÿã€

---

## Scene 3: æ¨™æº–åå·®ã¨ã®å‡ºä¼šã„

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ï¼ˆå¤§å­¦æ™‚ä»£ã®çµ±è¨ˆå­¦ã®æ•™ç§‘æ›¸ã‚’é–‹ãï¼‰

```markdown
ã€æ¨™æº–åå·®ï¼ˆÏƒ: ã‚·ã‚°ãƒï¼‰ã€‘

å®šç¾©:
ãƒ‡ãƒ¼ã‚¿ã®ã€Œã°ã‚‰ã¤ãã€ã‚’æ¸¬ã‚‹æŒ‡æ¨™

æ­£è¦åˆ†å¸ƒã®æ€§è³ª:
- å¹³å‡ Â± 1Ïƒ ã®ç¯„å›²: ãƒ‡ãƒ¼ã‚¿ã®ç´„68%ãŒå«ã¾ã‚Œã‚‹
- å¹³å‡ Â± 2Ïƒ ã®ç¯„å›²: ãƒ‡ãƒ¼ã‚¿ã®ç´„95%ãŒå«ã¾ã‚Œã‚‹
- å¹³å‡ Â± 3Ïƒ ã®ç¯„å›²: ãƒ‡ãƒ¼ã‚¿ã®ç´„99.7%ãŒå«ã¾ã‚Œã‚‹

ä¾‹ï¼ˆãƒ†ã‚¹ãƒˆã®ç‚¹æ•°ï¼‰:
å¹³å‡: 60ç‚¹ã€æ¨™æº–åå·®: 10ç‚¹
â†’ 40-80ç‚¹ã®ç¯„å›²ã«ç´„95%ã®ç”Ÿå¾’
â†’ 80ç‚¹ä»¥ä¸Šã¯ã€Œç•°å¸¸ã«é«˜ã„ã€ï¼ˆä¸Šä½2.5%ï¼‰
```

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œ...ã“ã‚Œã ï¼ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œä¾¡æ ¼ã®æ¨™æº–åå·®ã‚’ä½¿ãˆã°ã€ã€æ­£å¸¸ç¯„å›²ã€ãŒå®šç¾©ã§ãã‚‹ï¼ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œãã—ã¦ã€ç¯„å›²ã®å¤– = ç•°å¸¸ = ãƒªã‚¹ã‚¯é«˜ã„ã€

---

## Scene 4: Bollinger Bandsã®èª•ç”Ÿ

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ï¼ˆèˆˆå¥®ã—ã¦ãƒšãƒ³ã‚’èµ°ã‚‰ã›ã‚‹ï¼‰

```markdown
ã€Bollinger Bands æ•°å¼ã€‘

Middle Band = SMA(20)
ï¼ˆ20æ—¥é–“ã®å˜ç´”ç§»å‹•å¹³å‡ï¼‰

Upper Band = SMA(20) + (2 Ã— Ïƒ)
Lower Band = SMA(20) - (2 Ã— Ïƒ)

Ïƒ = æ¨™æº–åå·®ï¼ˆéå»20æ—¥é–“ï¼‰

è§£é‡ˆ:
- ä¾¡æ ¼ãŒãƒãƒ³ãƒ‰å†…: æ­£å¸¸ç¯„å›²ï¼ˆå®‰å…¨ï¼‰
- ä¾¡æ ¼ãŒãƒãƒ³ãƒ‰å¤–: ç•°å¸¸ç¯„å›²ï¼ˆå±é™ºï¼‰
- ãƒãƒ³ãƒ‰å¹…æ‹¡å¤§: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£å¢—åŠ 
- ãƒãƒ³ãƒ‰å¹…ç¸®å°: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£æ¸›å°‘
```

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ï¼ˆéå»ãƒãƒ£ãƒ¼ãƒˆã§æ¤œè¨¼ï¼‰

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œ...å®Œç’§ã ï¼ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œä¾¡æ ¼ãŒUpper Bandã‚’è¶…ãˆãŸ â†’ è²·ã‚ã‚Œã™ã â†’ ãã®å¾Œä¸‹è½ã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œä¾¡æ ¼ãŒLower Bandã‚’ä¸‹å›ã£ãŸ â†’ å£²ã‚‰ã‚Œã™ã â†’ ãã®å¾Œåç™ºã€

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼**: ã€Œãã—ã¦ã€ãƒãƒ³ãƒ‰å¹…ãŒç¸®ã‚“ã å¾Œã€å¿…ãšå¤§ããå‹•ã„ã¦ã‚‹ï¼ã€

---

## Scene 5: 1980å¹´ä»£ã€ä¼èª¬ã®å…¬é–‹

**ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**:
1980å¹´ä»£ã€ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ã¯ã“ã®æ‰‹æ³•ã‚’ã€ŒFinancial News Networkã€ã®TVãƒ¬ãƒãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦å…¬é–‹ã€‚

ç¬ãé–“ã«ä¸–ç•Œä¸­ã®ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼ã«åºƒã¾ã£ãŸã€‚

**ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ã®è¨€è‘‰**:
> "Bollinger Bandsã¯ä¾¡æ ¼ã®ç›¸å¯¾çš„ãªé«˜ã•ãƒ»ä½ã•ã‚’æ•™ãˆã¦ãã‚Œã‚‹ã€‚ãƒãƒ³ãƒ‰ã¯å¸‚å ´ã®ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã«å¿œã˜ã¦è‡ªå‹•çš„ã«åºƒãŒã‚Šã€ç‹­ã¾ã‚‹ã€‚"

---

## Scene 6: ç¾ä»£ã€ãƒ¦ã‚¦ã‚¿ã¨ãƒŸã‚³

**ãƒ¦ã‚¦ã‚¿**: ã€Œæ¨™æº–åå·®...çµ±è¨ˆå­¦ã‹ã€

**ãƒŸã‚³**: ã€Œãã†ã€‚ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ã¯ã€ä¾¡æ ¼ã‚’ã€ç¢ºç‡ã€ã§æ‰ãˆãŸã€

**ãƒŸã‚³**: ã€Œã˜ã‚ƒã‚ã€å®Ÿè£…ã—ã‚ˆã†ã€

---

## Scene 7: Bollinger Bandsã®å®Ÿè£…

```python
def calculate_bollinger_bands(prices: pd.Series,
                               period: int = 20,
                               num_std: float = 2.0) -> pd.DataFrame:
    """
    Bollinger Bands ã‚’è¨ˆç®—

    Args:
        prices: çµ‚å€¤ã®Series
        period: æœŸé–“ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ20ï¼‰
        num_std: æ¨™æº–åå·®ã®å€æ•°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ2.0ï¼‰

    Returns:
        DataFrameï¼ˆupper, middle, lower, bandwidth, percent_bï¼‰
    """
    # Middle Bandï¼ˆç§»å‹•å¹³å‡ï¼‰
    middle = prices.rolling(window=period).mean()

    # æ¨™æº–åå·®
    std = prices.rolling(window=period).std()

    # Upper/Lower Band
    upper = middle + (num_std * std)
    lower = middle - (num_std * std)

    # Band Widthï¼ˆãƒãƒ³ãƒ‰ã®å¹…ï¼‰
    bandwidth = (upper - lower) / middle

    # %Bï¼ˆä¾¡æ ¼ã®ãƒãƒ³ãƒ‰å†…ä½ç½®ï¼‰
    percent_b = (prices - lower) / (upper - lower)

    return pd.DataFrame({
        'upper': upper,
        'middle': middle,
        'lower': lower,
        'bandwidth': bandwidth,
        'percent_b': percent_b
    })
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œbandwidth ã¨ percent_b ã£ã¦ä½•ï¼Ÿã€

**ãƒŸã‚³**: ã€Œãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãŒå¾Œã‹ã‚‰è¿½åŠ ã—ãŸæŒ‡æ¨™ã ã€

```markdown
ã€è¿½åŠ æŒ‡æ¨™ã€‘

## Band Widthï¼ˆãƒãƒ³ãƒ‰å¹…ï¼‰
= (Upper - Lower) / Middle

æ„å‘³:
- å¤§ãã„: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£é«˜ã„ï¼ˆä¾¡æ ¼ãŒæ¿€ã—ãå‹•ãï¼‰
- å°ã•ã„: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ä½ã„ï¼ˆä¾¡æ ¼ãŒé™ã‹ï¼‰

ä½¿ã„æ–¹:
ãƒãƒ³ãƒ‰å¹…ãŒæ¥µç«¯ã«ç¸®å°ï¼ˆã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºï¼‰
â†’ ãã®å¾Œã€å¤§ããå‹•ãï¼ˆãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆï¼‰ã®å‰å…†

## %Bï¼ˆãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆBï¼‰
= (Price - Lower) / (Upper - Lower)

æ„å‘³:
- %B = 1.0: ä¾¡æ ¼ãŒUpper Bandï¼ˆè²·ã‚ã‚Œã™ãï¼‰
- %B = 0.5: ä¾¡æ ¼ãŒMiddle Bandï¼ˆä¸­ç«‹ï¼‰
- %B = 0.0: ä¾¡æ ¼ãŒLower Bandï¼ˆå£²ã‚‰ã‚Œã™ãï¼‰
- %B > 1.0: ãƒãƒ³ãƒ‰çªç ´ï¼ˆä¸Šï¼‰
- %B < 0.0: ãƒãƒ³ãƒ‰çªç ´ï¼ˆä¸‹ï¼‰
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œæ•°å€¤åŒ–ã•ã‚Œã¦ã‚‹ã‹ã‚‰åˆ¤æ–­ã—ã‚„ã™ã„ï¼ã€

---

## Scene 8: SHIBã§ã®æ¤œè¨¼

```python
# SHIBã®ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿
shib_df = timeseries_manager.get_data('SHIB')

# Bollinger Bandsè¨ˆç®—
bb = calculate_bollinger_bands(shib_df['close'])
shib_df = pd.concat([shib_df, bb], axis=1)

# ãƒ¦ã‚¦ã‚¿ãŒè²·ã£ãŸæ—¥
buy_date = '2025-10-18 15:30'

print(f"è³¼å…¥æ—¥:")
print(f"  ä¾¡æ ¼: ${shib_df.loc[buy_date, 'close']:.8f}")
print(f"  Upper Band: ${shib_df.loc[buy_date, 'upper']:.8f}")
print(f"  Middle Band: ${shib_df.loc[buy_date, 'middle']:.8f}")
print(f"  Lower Band: ${shib_df.loc[buy_date, 'lower']:.8f}")
print(f"  %B: {shib_df.loc[buy_date, 'percent_b']:.2f}")
print(f"  Band Width: {shib_df.loc[buy_date, 'bandwidth']:.4f}")
```

**å‡ºåŠ›**:
```
è³¼å…¥æ—¥:
  ä¾¡æ ¼: $0.00001050
  Upper Band: $0.00001120
  Middle Band: $0.00001030
  Lower Band: $0.00000940
  %B: 0.61  ï¼ˆUpperå¯„ã‚Šï¼‰
  Band Width: 0.1747  ï¼ˆåºƒã„ = ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£é«˜ã„ï¼‰
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œ%BãŒ0.61...Upperå¯„ã‚Šã ã€

**ãƒŸã‚³**: ã€Œã—ã‹ã‚‚ã€Band WidthãŒ0.17ã¨åºƒã„ã€‚ä¾¡æ ¼ãŒæ¿€ã—ãå‹•ã„ã¦ã‚‹ã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œãƒã‚¤ãƒªã‚¹ã‚¯ãªçŠ¶æ³ã§è²·ã£ã¦ãŸã®ã‹...ã€

**ãƒŸã‚³**: ã€Œæ¬¡ã«ã€DOGEã‚’è¦‹ã‚ˆã†ã€

```python
# DOGEã®æ¤œè¨¼
doge_df = timeseries_manager.get_data('DOGE')
bb = calculate_bollinger_bands(doge_df['close'])
doge_df = pd.concat([doge_df, bb], axis=1)

buy_date = '2025-10-18 20:00'
print(f"è³¼å…¥æ—¥:")
print(f"  ä¾¡æ ¼: ${doge_df.loc[buy_date, 'close']:.4f}")
print(f"  %B: {doge_df.loc[buy_date, 'percent_b']:.2f}")
print(f"  Band Width: {doge_df.loc[buy_date, 'bandwidth']:.4f}")
```

**å‡ºåŠ›**:
```
è³¼å…¥æ—¥:
  ä¾¡æ ¼: $0.1950
  %B: 0.45  ï¼ˆMiddleå¯„ã‚Šï¼‰
  Band Width: 0.0823  ï¼ˆç‹­ã„ = ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ä½ã„ï¼‰
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œ%BãŒ0.45ã§Middleå¯„ã‚Šã€‚Band Widthã‚‚0.08ã¨ç‹­ã„ã€

**ãƒŸã‚³**: ã€Œä½ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã§ã€ãƒãƒ³ãƒ‰ã®ä¸­å¤®ä»˜è¿‘ã€‚ãƒªã‚¹ã‚¯ãŒä½ã„çŠ¶æ…‹ã ã£ãŸã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œã ã‹ã‚‰å‹ã¦ãŸã‚“ã ï¼ã€

---

## Scene 9: Bollinger Bandsã®4ã¤ã®ä½¿ã„æ–¹

```markdown
ã€Bollinger Bandsã®4ã¤ã®ä½¿ã„æ–¹ã€‘

## 1. ãƒãƒ³ãƒ‰ã‚¿ãƒƒãƒæˆ¦ç•¥ï¼ˆé€†å¼µã‚Šï¼‰
ä¾¡æ ¼ãŒUpper Bandã‚¿ãƒƒãƒ â†’ å£²ã‚Šã‚·ã‚°ãƒŠãƒ«
ä¾¡æ ¼ãŒLower Bandã‚¿ãƒƒãƒ â†’ è²·ã„ã‚·ã‚°ãƒŠãƒ«

æ³¨æ„:
ãƒˆãƒ¬ãƒ³ãƒ‰ç›¸å ´ã§ã¯é€šç”¨ã—ãªã„
â†’ ãƒ¬ãƒ³ã‚¸ç›¸å ´å°‚ç”¨

## 2. ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºï¼†ã‚¨ã‚¯ã‚¹ãƒ‘ãƒ³ã‚·ãƒ§ãƒ³
ãƒãƒ³ãƒ‰å¹…ãŒæ¥µç«¯ã«ç¸®å°ï¼ˆã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºï¼‰
â†’ ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ä½ä¸‹
â†’ ãã®å¾Œã€å¤§ããå‹•ãï¼ˆãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆï¼‰

ä½¿ã„æ–¹:
ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºæ¤œå‡º â†’ å¾…æ©Ÿ
ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆæ–¹å‘ã«ã¤ã„ã¦ã„ã

## 3. ãƒãƒ³ãƒ‰ã‚¦ã‚©ãƒ¼ã‚¯ï¼ˆé †å¼µã‚Šï¼‰
å¼·ã„ãƒˆãƒ¬ãƒ³ãƒ‰:
ä¾¡æ ¼ãŒUpper Bandæ²¿ã„ã‚’æ¨ç§»ï¼ˆä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰
ä¾¡æ ¼ãŒLower Bandæ²¿ã„ã‚’æ¨ç§»ï¼ˆä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰ï¼‰

ä½¿ã„æ–¹:
ãƒãƒ³ãƒ‰ã‚¦ã‚©ãƒ¼ã‚¯æ¤œå‡º â†’ ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ•ã‚©ãƒ­ãƒ¼

## 4. %Bã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
%B > 0.8: è²·ã‚ã‚Œã™ã â†’ è²·ã‚ãªã„
%B < 0.2: å£²ã‚‰ã‚Œã™ã â†’ å£²ã‚‰ãªã„
%B 0.4-0.6: ä¸­ç«‹ â†’ ã‚¨ãƒ³ãƒˆãƒªãƒ¼æ¤œè¨
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œ4ã¤ã‚‚ã‚ã‚‹ã®ã‹...ã€

**ãƒŸã‚³**: ã€Œã§ã‚‚ã€ä¿ºãŸã¡ã¯ã€ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºã€ã¨ã€%Bã€ã ã‘ä½¿ã†ã€

---

## Scene 10: ãƒ¦ã‚¦ã‚¿å¼ã§ã®ä½¿ã„æ–¹

```markdown
ã€ãƒ¦ã‚¦ã‚¿å¼ã§ã®Bollinger Bandsæ´»ç”¨æ³•ã€‘

## ã‚¨ãƒ³ãƒˆãƒªãƒ¼åˆ¤æ–­ï¼ˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼‰
âœ… %B 0.2-0.6: è²·ã„ã‚¨ãƒªã‚¢
âœ… Band Width < 0.10: ä½ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå®‰å…¨ï¼‰
âŒ %B > 0.8: è²·ã‚ã‚Œã™ãï¼ˆè²·ã‚ãªã„ï¼‰
âŒ Band Width > 0.20: é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå±é™ºã€é¿ã‘ã‚‹ï¼‰

## ã‚¤ã‚°ã‚¸ãƒƒãƒˆåˆ¤æ–­
âœ… %B > 0.9: éç†± â†’ åˆ©ç¢ºæ¤œè¨
âœ… %B < 0.1: å†·ãˆè¾¼ã¿ â†’ æåˆ‡ã‚Šæ¤œè¨

## ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºæ¤œå‡ºï¼ˆãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆç‹™ã„ï¼‰
Band Width < 0.05 ãŒ3æ—¥ä»¥ä¸Šç¶šã
â†’ ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºçŠ¶æ…‹
â†’ ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆå¾…æ©Ÿ

ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆå¾Œ:
%B > 0.8: ä¸Šæ–¹å‘ãƒ–ãƒ¬ã‚¤ã‚¯ â†’ è²·ã„
%B < 0.2: ä¸‹æ–¹å‘ãƒ–ãƒ¬ã‚¤ã‚¯ â†’ è¦‹é€ã‚Š

## çµ„ã¿åˆã‚ã›ï¼ˆRSI + MACD + BBï¼‰
å¼·ã„è²·ã„ã‚·ã‚°ãƒŠãƒ«:
âœ… RSI < 30ï¼ˆå£²ã‚‰ã‚Œã™ãï¼‰
âœ… MACD ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ï¼ˆå‹¢ã„é–‹å§‹ï¼‰
âœ… %B < 0.3ï¼ˆLower Bandå¯„ã‚Šï¼‰
âœ… Band Width < 0.10ï¼ˆä½ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼‰
â†’ å®‰å…¨ãªåç™ºç‹™ã„
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œ3ã¤ã®æ­¦å™¨ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã‚“ã ã€

**ãƒŸã‚³**: ã€Œãã†ã€‚å˜ä½“ã‚ˆã‚Šã€çµ„ã¿åˆã‚ã›ã®æ–¹ãŒåœ§å€’çš„ã«å¼·ã„ã€

---

## Scene 11: å®Ÿè£…ã‚³ãƒ¼ãƒ‰ï¼ˆå®Œæˆç‰ˆï¼‰

```python
# tools/technical_indicators.py ã«è¿½åŠ 

class TechnicalIndicators:
    # ... (RSI, MACD ã¯å‰å›) ...

    @staticmethod
    def bollinger_bands(prices: pd.Series,
                        period: int = 20,
                        num_std: float = 2.0) -> pd.DataFrame:
        """
        Bollinger Bands

        ç™ºæ˜è€…: John Bollinger (1980å¹´ä»£)
        ç”¨é€”: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã¨ä¾¡æ ¼ã®ç›¸å¯¾çš„ä½ç½®ã‚’åˆ¤å®š

        Args:
            prices: çµ‚å€¤
            period: æœŸé–“ï¼ˆ20ï¼‰
            num_std: æ¨™æº–åå·®ã®å€æ•°ï¼ˆ2.0ï¼‰

        Returns:
            DataFrameï¼ˆupper, middle, lower, bandwidth, percent_bï¼‰
        """
        middle = prices.rolling(window=period).mean()
        std = prices.rolling(window=period).std()

        upper = middle + (num_std * std)
        lower = middle - (num_std * std)

        bandwidth = (upper - lower) / middle
        percent_b = (prices - lower) / (upper - lower)

        return pd.DataFrame({
            'upper': upper,
            'middle': middle,
            'lower': lower,
            'bandwidth': bandwidth,
            'percent_b': percent_b
        })

    @staticmethod
    def interpret_bollinger(percent_b: float, bandwidth: float) -> dict:
        """
        Bollinger Bandså€¤ã‚’è§£é‡ˆ

        Args:
            percent_b: %Bå€¤
            bandwidth: Band Width

        Returns:
            è§£é‡ˆçµæœ
        """
        # ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£åˆ¤å®š
        if bandwidth > 0.20:
            volatility = 'high'
            vol_desc = 'é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå±é™ºï¼‰'
        elif bandwidth > 0.10:
            volatility = 'medium'
            vol_desc = 'ä¸­ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£'
        else:
            volatility = 'low'
            vol_desc = 'ä½ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå®‰å…¨ï¼‰'

        # ä¾¡æ ¼ä½ç½®åˆ¤å®š
        if percent_b > 0.8:
            position = 'overbought'
            pos_desc = 'Upper Bandä»˜è¿‘ï¼ˆè²·ã‚ã‚Œã™ãï¼‰'
            signal = 'sell'
        elif percent_b < 0.2:
            position = 'oversold'
            pos_desc = 'Lower Bandä»˜è¿‘ï¼ˆå£²ã‚‰ã‚Œã™ãï¼‰'
            signal = 'buy'
        else:
            position = 'neutral'
            pos_desc = 'ãƒãƒ³ãƒ‰ä¸­å¤®ï¼ˆä¸­ç«‹ï¼‰'
            signal = 'hold'

        return {
            'volatility': volatility,
            'position': position,
            'signal': signal,
            'description': f"{pos_desc} / {vol_desc}",
            'percent_b': percent_b,
            'bandwidth': bandwidth
        }

    @staticmethod
    def detect_squeeze(bandwidth: pd.Series, threshold: float = 0.05, days: int = 3) -> bool:
        """
        ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºæ¤œå‡º

        Args:
            bandwidth: Band Width Series
            threshold: ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºé–¾å€¤ï¼ˆ0.05ï¼‰
            days: ç¶™ç¶šæ—¥æ•°ï¼ˆ3ï¼‰

        Returns:
            ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºä¸­ã‹ã©ã†ã‹
        """
        recent = bandwidth.tail(days)
        return all(recent < threshold)

    @staticmethod
    def triple_signal(rsi: float, macd_result: dict, bb_result: dict) -> dict:
        """
        RSI Ã— MACD Ã— Bollinger Bands çµ±åˆã‚·ã‚°ãƒŠãƒ«

        Args:
            rsi: RSIå€¤
            macd_result: interpret_macd()ã®çµæœ
            bb_result: interpret_bollinger()ã®çµæœ

        Returns:
            çµ±åˆã‚·ã‚°ãƒŠãƒ«
        """
        # æœ€å¼·è²·ã„ã‚·ã‚°ãƒŠãƒ«
        if (rsi < 30 and
            macd_result['signal'] == 'buy' and
            bb_result['percent_b'] < 0.3 and
            bb_result['volatility'] == 'low'):
            return {
                'signal': 'very_strong_buy',
                'confidence': 0.95,
                'description': 'ã€æœ€å¼·è²·ã„ã‚·ã‚°ãƒŠãƒ«ã€‘å£²ã‚‰ã‚Œã™ãï¼‹ä¸Šæ˜‡å‹¢ã„ï¼‹ä½ãƒœãƒ©ã€‚é«˜ç¢ºç‡ã§åç™ºã€‚',
                'components': {
                    'rsi': f'{rsi:.1f}ï¼ˆå£²ã‚‰ã‚Œã™ãï¼‰',
                    'macd': 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹',
                    'bollinger': f'%B={bb_result["percent_b"]:.2f}ï¼ˆLowerå¯„ã‚Šï¼‰/ ä½ãƒœãƒ©'
                }
            }

        # å¼·ã„è²·ã„ã‚·ã‚°ãƒŠãƒ«
        if (rsi < 40 and
            macd_result['signal'] == 'buy' and
            bb_result['percent_b'] < 0.5 and
            bb_result['volatility'] != 'high'):
            return {
                'signal': 'strong_buy',
                'confidence': 0.80,
                'description': 'ã€å¼·ã„è²·ã„ã‚·ã‚°ãƒŠãƒ«ã€‘è¤‡æ•°æŒ‡æ¨™ãŒè²·ã„ã‚’ç¤ºå”†ã€‚',
                'components': {
                    'rsi': f'{rsi:.1f}',
                    'macd': macd_result['description'],
                    'bollinger': bb_result['description']
                }
            }

        # å±é™ºï¼ˆè²·ã‚ãªã„ï¼‰
        if (rsi > 70 or
            bb_result['percent_b'] > 0.8 or
            bb_result['volatility'] == 'high'):
            return {
                'signal': 'avoid',
                'confidence': 0.85,
                'description': 'ã€å±é™ºã€‘è²·ã‚ã‚Œã™ã or é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã€‚ã‚¨ãƒ³ãƒˆãƒªãƒ¼é¿ã‘ã‚‹ã€‚',
                'components': {
                    'rsi': f'{rsi:.1f}',
                    'macd': macd_result['description'],
                    'bollinger': bb_result['description']
                }
            }

        # é€šå¸¸ã‚·ã‚°ãƒŠãƒ«
        return {
            'signal': 'hold',
            'confidence': 0.50,
            'description': 'ã€æ§˜å­è¦‹ã€‘æ˜ç¢ºãªã‚·ã‚°ãƒŠãƒ«ãªã—ã€‚',
            'components': {
                'rsi': f'{rsi:.1f}',
                'macd': macd_result['description'],
                'bollinger': bb_result['description']
            }
        }
```

**ãƒ¦ã‚¦ã‚¿**: ã€Œã“ã‚Œã§ã€3ã¤ã®æ­¦å™¨ãŒå®Œå…¨çµ±åˆã•ã‚ŒãŸï¼ã€

---

## Scene 12: ã‚¨ãƒ”ãƒ­ãƒ¼ã‚°

**ãƒŸã‚³**: ã€ŒRSIã€MACDã€Bollinger Bandsã€

**ãƒŸã‚³**: ã€Œã“ã®3ã¤ã§ã€**ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã®åŸºç¤**ã¯å®Œæˆã ã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œã§ã‚‚ã€ã¾ã ã€äºˆæ¸¬ã€ã¯ã§ããªã„ã‚ˆã­ï¼Ÿã€

**ãƒŸã‚³**: ã€Œãã†ã€‚ä»Šã®ã¯ã€ä»Šã®çŠ¶æ…‹ã€ã‚’åˆ¤æ–­ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€

**ãƒŸã‚³**: ã€Œæ¬¡ã¯...ã€æœªæ¥ã€ã‚’äºˆæ¸¬ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã ã€

**ãƒ¦ã‚¦ã‚¿**: ã€Œæœªæ¥ï¼Ÿã€

**ãƒŸã‚³**: ã€Œæ•°å­¦ã®åŠ›ã§ã€ä¾¡æ ¼ã‚’äºˆæ¸¬ã™ã‚‹ã€

---

## ğŸ“ Chapter 4 ã¾ã¨ã‚

### Bollinger Bands

```markdown
ã€ç™ºæ˜ã€‘
- ç™ºæ˜è€…: John Bollinger (1980å¹´ä»£)
- å‹•æ©Ÿ: ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã«å¿œã˜ãŸã€Œæ­£å¸¸ç¯„å›²ã€ã‚’å®šç¾©ã—ãŸã„

ã€è¨ˆç®—å¼ã€‘
Upper Band = SMA(20) + (2 Ã— Ïƒ)
Middle Band = SMA(20)
Lower Band = SMA(20) - (2 Ã— Ïƒ)

Band Width = (Upper - Lower) / Middle
%B = (Price - Lower) / (Upper - Lower)

ã€è§£é‡ˆã€‘
- %B > 0.8: è²·ã‚ã‚Œã™ã
- %B < 0.2: å£²ã‚‰ã‚Œã™ã
- Band Widthå¤§: é«˜ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå±é™ºï¼‰
- Band Widthå°: ä½ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå®‰å…¨ï¼‰

ã€çµ±åˆæˆ¦ç•¥ã€‘
æœ€å¼·è²·ã„: RSI < 30 ï¼‹ MACDã‚¯ãƒ­ã‚¹ ï¼‹ %B < 0.3 ï¼‹ ä½ãƒœãƒ©
```

### å®Ÿè£…å®Œäº†

âœ… `tools/technical_indicators.py` å®Œæˆ
- `bollinger_bands()`: BBè¨ˆç®—
- `interpret_bollinger()`: BBè§£é‡ˆ
- `detect_squeeze()`: ã‚¹ã‚¯ã‚¤ãƒ¼ã‚ºæ¤œå‡º
- `triple_signal()`: RSIÃ—MACDÃ—BBçµ±åˆ

---

## ğŸ› ï¸ å®Ÿè·µã§ä½¿ã†

Bollinger Bandsã‚’å®Ÿéš›ã®å–å¼•ã§æ´»ç”¨ã™ã‚‹æ–¹æ³•ï¼š
- **Week 2: ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«åˆ†æã®å®Ÿè·µ**ï¼ˆä½œæˆäºˆå®šï¼‰ - BBã§ãƒœãƒ©ãƒ†ã‚£ãƒªãƒ†ã‚£ã¨ãƒªã‚¹ã‚¯ã‚’è©•ä¾¡
  - ãƒãƒ³ãƒ‰å¹…ã§ãƒªã‚¹ã‚¯åˆ¤æ–­
  - %Bã§è²·ã‚ã‚Œã™ã/å£²ã‚‰ã‚Œã™ã
  - ã‚¹ã‚¯ã‚¤ãƒ¼ã‚º â†’ ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆäºˆæ¸¬

---

**Next Chapter**: [Chapter 5: ARIMA/GARCHã®ç™ºè¦‹ - ã€Œæœªæ¥ã€ã‚’æ•°å¼ã§äºˆæ¸¬ã™ã‚‹](./05_arima_garch_discovery.md)

---

## ğŸ“– æ¬¡ã¸

æ¬¡ã®ãƒ•ã‚¡ã‚¤ãƒ«: **[05. ARIMA/GARCH - æœªæ¥ã‚’äºˆæ¸¬ã™ã‚‹æ•°å­¦](./05_arima_garch.md)**

